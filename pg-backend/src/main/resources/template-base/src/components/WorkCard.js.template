import React from "react";
import { motion } from "framer-motion";
import { FiGithub, FiLink, FiCalendar, FiMapPin } from "react-icons/fi";

const WorkCard = ({ w, tabId, index }) => {
	const cardVariants = {
		hidden: {
			opacity: 0,
			y: 30,
			scale: 0.95
		},
		visible: {
			opacity: 1,
			y: 0,
			scale: 1,
			transition: {
				duration: 0.5,
				ease: "easeOut",
				delay: index * 0.1
			}
		}
	};

	// Card width/center CSS suggestion:
	// Add this to your CSS:
	// .works-card {
	//   max-width: 380px;
	//   min-width: 320px;
	//   margin: 2rem auto;
	// }

	return (
		<motion.div
			variants={cardVariants}
			className="works-card"
			whileHover={{
				y: -8,
				scale: 1.02,
				transition: { duration: 0.3 }
			}}
			whileTap={{ scale: 0.98 }}
		>
			<div className="works-container">
				{/* Card Header */}
				<div className="card-header">
					<span className={`type-badge ${tabId}`}>
						{tabId === 'financial' && '💰'}
						{tabId === 'government' && '🏛️'}
						{tabId === 'advisory' && '📊'}
						{tabId === 'achievements' && '🏆'}
					</span>
					<div className="work-links">
						{w.github && (
							<a
								className="work-link"
								href={w.github}
								target="_blank"
								rel="noopener noreferrer"
								title="View on GitHub"
								onClick={e => e.stopPropagation()}
							>
								<FiGithub />
							</a>
						)}
						{w.link && (
							<a
								className="work-link"
								href={w.link}
								target="_blank"
								rel="noopener noreferrer"
								title="Open project link"
								onClick={e => e.stopPropagation()}
							>
								<FiLink />
							</a>
						)}
					</div>
				</div>

				{/* Card Content */}
				<div className="card-content">
					<h3 className="work-title">{w.title || "Untitled Project"}</h3>
					<p className="work-desc">{w.description || "No description available."}</p>

					{/* Project Details */}
					<div className="project-details">
						{w.duration && (
							<div className="detail-item">
								<FiCalendar className="detail-icon" />
								<span>{w.duration}</span>
							</div>
						)}
						{w.location && (
							<div className="detail-item">
								<FiMapPin className="detail-icon" />
								<span>{w.location}</span>
							</div>
						)}
						{w.value && (
							<div className="detail-item">
								<span className="value-label">Value:</span>
								<span className="value-amount">{w.value}</span>
							</div>
						)}
					</div>
				</div>

				{/* Card Footer */}
				{w.tech && Array.isArray(w.tech) && w.tech.length > 0 && (
					<div className="tech-stack">
						<strong>Tech Stack:</strong>{" "}
						{w.tech.join(", ")}
					</div>
				)}
				<div className="card-footer">
					{w.skills && Array.isArray(w.skills) && (
						<div className="skills-tags">
							{w.skills.map((skill, i) => (
								<span key={i} className="skill-tag">{skill}</span>
							))}
						</div>
					)}
					{w.status && (
						<div className={`status-badge ${w.status.toLowerCase().replace(' ', '-')}`}>
							{w.status}
						</div>
					)}
				</div>
			</div>
		</motion.div>
	);
};

export default WorkCard;